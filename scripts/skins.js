
 let  _shop = [
        [

               {selected:true,unlocked:true,cost:"FREE",level:0,skin:"square_9"},             
               {cost:"FREE",level:1,unlocked:true,skin:"square_4"},
               {cost:"FREE",level:1,unlocked:true,skin:"square_5"},
               {cost:"FREE",level:1,unlocked:true,skin:"square_6"},
               {cost:"FREE",level:1,unlocked:true,skin:"square_7"},
               {cost:"FREE",level:1,unlocked:true,skin:"square_10"},
               {cost:"FREE",level:1,unlocked:true,skin:"square_11"},
               {cost:"FREE",level:1,unlocked:true,skin:"square_12"},
               {cost:"FREE",level:1,unlocked:true,skin:"square_8"},
     
               {cost:0,level:1,skin:"square_42",ads:1,adsWatched:0},

          {cost:75,level:5,skin:"square_13"},
          {cost:85,level:7,skin:"square_18"},
          {cost:90,level:8,skin:"square_19"},
          {cost:120,level:10,skin:"square_22"},
          {cost:0,level:12,skin:"square_33",ads:2,adsWatched:0},
          {cost:150,level:12,skin:"square_39"},
          {cost:150,level:13,skin:"square_16"},
          {cost:180,level:14,skin:"square_20"},
          {cost:200,level:15,skin:"square_21"},
          {cost:250,level:18,skin:"square_29"},
          {cost:250,level:18,skin:"square_30"},
          {cost:300,level:20,skin:"square_14"},
   
          {cost:350,level:21,skin:"square_15"},
          {cost:350,level:21,skin:"square_17"},
          {cost:380,level:22,skin:"square_37"},
          {cost:400,level:24,skin:"square_27"},

          {cost:0,level:25,skin:"square_28",ads:1,adsWatched:0},

          {cost:440,level:25,skin:"square_31"},
          {cost:550,level:26,skin:"square_36"},
          {cost:650,level:27,skin:"square_34"},
          {cost:650,level:27,skin:"square_25"},
          {cost:800,level:30,skin:"square_35"},
          {cost:900,level:31,skin:"square_24"},
          {cost:1050,level:31,skin:"square_23"},
      
          {cost:1250,level:32,skin:"square_32"},
          {cost:1300,level:33,skin:"square_26"},
          {cost:1500,level:34,skin:"square_41"},
          {cost:2000,level:37,skin:"square_40"},
          {cost:5000,level:40,skin:"square_38"},
       
        ],
        [
                {selected:true,unlocked:true,cost:"FREE",level:0,skin:"triangle_9"},
                {cost:"FREE",level:1,unlocked:true,skin:"triangle_4"},
                {cost:"FREE",level:1,unlocked:true,skin:"triangle_5"},
                {cost:"FREE",level:1,unlocked:true,skin:"triangle_6"},
                {cost:"FREE",level:1,unlocked:true,skin:"triangle_7"},
                {cost:"FREE",level:1,unlocked:true,skin:"triangle_10"},
                {cost:"FREE",level:1,unlocked:true,skin:"triangle_11"},
                {cost:"FREE",level:1,unlocked:true,skin:"triangle_12"},
                {cost:"FREE",level:1,unlocked:true,skin:"triangle_8"},

                {cost:0,level:1,skin:"triangle_42",ads:1,adsWatched:0},

                {cost:75,level:5,skin:"triangle_13"},

          {cost:85,level:7,skin:"triangle_18"},
          {cost:90,level:8,skin:"triangle_19"},
          {cost:120,level:10,skin:"triangle_22"},

          {cost:0,level:12,skin:"triangle_33",ads:2,adsWatched:0},

          {cost:150,level:12,skin:"triangle_39"},
          {cost:150,level:13,skin:"triangle_16"},
          {cost:180,level:14,skin:"triangle_20"},
          {cost:200,level:15,skin:"triangle_21"},
          {cost:250,level:18,skin:"triangle_29"},

          {cost:250,level:18,skin:"triangle_30"},
          {cost:300,level:20,skin:"triangle_14"},
          {cost:350,level:21,skin:"triangle_15"},
          {cost:350,level:21,skin:"triangle_17"},
          {cost:380,level:22,skin:"triangle_37"},
          {cost:400,level:24,skin:"triangle_27"},

          {cost:0,level:25,skin:"triangle_28",ads:1,adsWatched:0},

          {cost:440,level:25,skin:"triangle_31"},
          {cost:550,level:26,skin:"triangle_36"},
          {cost:650,level:27,skin:"triangle_34"},
          {cost:670,level:27,skin:"triangle_25"},
          {cost:800,level:30,skin:"triangle_35"},
    
          {cost:900,level:31,skin:"triangle_24"},
          {cost:1050,level:31,skin:"triangle_23"},
          {cost:1250,level:32,skin:"triangle_32"},
          {cost:1300,level:33,skin:"triangle_26"},
          {cost:1500,level:34,skin:"triangle_41"},
          {cost:2000,level:37,skin:"triangle_40"},
          {cost:5000,level:40,skin:"triangle_38"},
        ],
        [
                {unlocked:true,selected:true,cost:"FREE",level:1,skin:"circle_9"},
                {cost:"FREE",level:1,unlocked:true,skin:"circle_4"},
                {cost:"FREE",level:1,unlocked:true,skin:"circle_5"},
                {cost:"FREE",level:1,unlocked:true,skin:"circle_6"},
                {cost:"FREE",level:1,unlocked:true,skin:"circle_7"},
                {cost:"FREE",level:1,unlocked:true,skin:"circle_10"},
                {cost:"FREE",level:1,unlocked:true,skin:"circle_11"},
                {cost:"FREE",level:1,unlocked:true,skin:"circle_12"},
                {cost:"FREE",level:1,unlocked:true,skin:"circle_8"},

          {cost:0,level:1,skin:"circle_42",ads:1,adsWatched:0},

          {cost:75,level:5,skin:"circle_13"},
          {cost:85,level:7,skin:"circle_18"},
          {cost:90,level:8,skin:"circle_19"},
          {cost:120,level:10,skin:"circle_22"},

          {cost:150,level:12,skin:"circle_33",ads:2,adsWatched:0},

          {cost:150,level:12,skin:"circle_39"},
          {cost:150,level:13,skin:"circle_16"},
          {cost:180,level:14,skin:"circle_20"},
          {cost:200,level:15,skin:"circle_21"},
          {cost:250,level:18,skin:"circle_29"},

          {cost:250,level:18,skin:"circle_30"},
          {cost:300,level:20,skin:"circle_14"},
          {cost:350,level:21,skin:"circle_15"},
          {cost:350,level:21,skin:"circle_17"},
          {cost:380,level:22,skin:"circle_37"},
          {cost:400,level:24,skin:"circle_27"},

          {cost:20,level:3,skin:"circle_28",ads:1,adsWatched:0},

          {cost:440,level:25,skin:"circle_31"},
          {cost:550,level:26,skin:"circle_36"},
          {cost:650,level:27,skin:"circle_34"},
          {cost:650,level:27,skin:"circle_25"},
          {cost:800,level:30,skin:"circle_35"},
     
          {cost:900,level:31,skin:"circle_24"},
          {cost:1050,level:31,skin:"circle_23"},
          {cost:1250,level:32,skin:"circle_32"},
          {cost:1300,level:33,skin:"circle_26"},
          {cost:1500,level:34,skin:"circle_41"},
          {cost:2000,level:37,skin:"circle_40"},
          {cost:5000,level:40,skin:"circle_38"},
       
        ]
      ];
 
const floorSkins = {
  cake:{
  bigFloorSkin:"floorCake_3",
    mediumFloorSkin:"floorCake_2",
    smallFloorSkin:"floorCake_4",
    floorAura:true,
    floorUpAura:true,
  },
  basic:{
    bigFloorSkin:"floor_3",
    mediumFloorSkin:"floor_2",
    smallFloorSkin:"floor_4",
    floorAura:true,
    floorUpAura:true,
  },
  grid:{
    bigFloorSkin:"floorGrid_3",
    mediumFloorSkin:"floorGrid_2",
    smallFloorSkin:"floorGrid_4",
    floorAura:false,
    floorUpAura:true,
  },
  triangles:{
    bigFloorSkin:"floorTriangles_3",
    mediumFloorSkin:"floorTriangles_2",
    smallFloorSkin:"floorTriangles_4",
    floorAura:true,
    floorUpAura:true,
  },
  castle:{
    bigFloorSkin:"floorCastle_3",
    mediumFloorSkin:"floorCastle_2",
    smallFloorSkin:"floorCastle_4",
    floorAura:false,
    floorUpAura:true,
  },
  simple:{
    bigFloorSkin:"floorSimple_3",
    mediumFloorSkin:"floorSimple_2",
    smallFloorSkin:"floorSimple_4",
    floorAura:"",
  },
  black:{
    bigFloorSkin:"floorBlack_3",
    mediumFloorSkin:"floorBlack_2",
    smallFloorSkin:"floorBlack_4",
    floorAura:true,
    floorUpAura:true,
  },
  
 
 
}



      function isShopUpdateAvailable(){
       
       for(const shape in _shop){
        if(_shop[shape].length != heroConfig.shop[shape].length
           || 
           _shop[0][4].cost != heroConfig.shop[0][4].cost)   return true
     
       }
      return false
      };

      function updateShop(){
        
        const updatedShop = [];

for(figure in heroConfig.shop){
  const selectedSkinindex = heroConfig.shop[figure].findIndex(skin=>skin.selected);
  _shop[figure].forEach(skin=>skin.selected = false);
  _shop[figure][selectedSkinindex].selected = true;
  _shop[figure][selectedSkinindex].unlocked = true;
}



        for(const shape in _shop){
         const arrayWithDuplicates = _shop[shape].concat(heroConfig.shop[shape])
   const filteredArray = Array.from(new Set(arrayWithDuplicates.map(obj => obj.skin)))
         .map(skin => {
           return arrayWithDuplicates.find(obj => obj.skin === skin)
         })
         updatedShop.push(filteredArray)
        }

for(const shapeIndex in _shop){
  for(const skinIndex in _shop[shapeIndex]){
   updatedShop[shapeIndex][skinIndex].cost =  _shop[shapeIndex][skinIndex].cost; 
   updatedShop[shapeIndex][skinIndex].level =  _shop[shapeIndex][skinIndex].level;
  }
}
  

/*
const old_shop = heroConfig.shop;
const updatedShop = _shop;

for(figure in old_shop){
for(skinIndex in old_shop[figure]){
  updatedShop[figure][skinIndex].unlocked = old_shop[figure][skinIndex].unlocked
  updatedShop[figure][skinIndex].selected = old_shop[figure][skinIndex].selected
}
}
*/
        heroConfig.shop = updatedShop;

      }
